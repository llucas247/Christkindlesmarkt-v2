<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Christkindlesmarkt-Date mit Lena ‚ú®</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Pers√∂nliche Einladung f√ºr Lena auf den N√ºrnberger Christkindlesmarkt ‚Äì w√§hle dein Wunschdatum und die Uhrzeit f√ºr unser Date." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg-page: #fff5ec;
      --bg-card: #fff9f4;
      --bg-hero: #181015;
      --accent: #b23a48;
      --accent-soft: #c86a79;
      --accent-light: #f0c6cf;
      --accent-pill: #f3dcd9;
      --text-main: #3b2520;
      --text-muted: #7b5c55;
      --border-soft: #edd3c7;
      --shadow-soft: 0 20px 60px rgba(0,0,0,0.12);
      --radius-xl: 18px;
      --radius-xxl: 22px;
      --transition-fast: 160ms ease-out;
      --transition-med: 220ms ease;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      min-height: 100vh;
      background: radial-gradient(circle at top, #ffe9d5 0, #fff5ec 35%, #fbe9dd 100%);
      font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      color: var(--text-main);
      display: flex;
      justify-content: center;
      padding: 24px;
    }

    @media (max-width: 720px) {
      body {
        padding: 12px;
      }
    }

    .page {
      max-width: 960px;
      width: 100%;
      background: transparent;
    }

    /* HERO ‚Äì Seite 1 */
    .hero-card {
      border-radius: 26px;
      overflow: hidden;
      box-shadow: var(--shadow-soft);
      margin-bottom: 22px;
      background: var(--bg-hero);
      position: relative;
    }

    .hero-image {
      position: relative;
      min-height: 260px;
      background-image:
        linear-gradient(to top, rgba(0,0,0,0.72), rgba(0,0,0,0.15)),
        url("https://images.unsplash.com/photo-1519682337058-a94d519337bc?auto=format&fit=crop&w=1600&q=80");   
      background-size: cover;
      background-position: center;
    }

    @media (max-width: 720px) {
      .hero-image {
        min-height: 220px;
      }
    }

    .hero-overlay {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: flex-end;
      padding: 28px 28px 26px;
    }

    .hero-content {
      max-width: 540px;
    }

    .hero-pill {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 6px 12px;
      border-radius: 999px;
      background: rgba(0,0,0,0.6);
      color: #ffe4cf;
      font-size: 0.8rem;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      margin-bottom: 10px;
    }

    .hero-pill span.icon {
      font-size: 1rem;
    }

    .hero-title {
      font-family: "Playfair Display", "Georgia", serif;
      font-size: clamp(2.2rem, 3vw, 2.7rem);
      color: #fff;
      margin-bottom: 6px;
    }

    .hero-title span {
      color: #ffe1c4;
    }

    .hero-subtitle {
      font-size: 0.98rem;
      color: #f9e4d7;
      max-width: 520px;
    }

    .hero-subtitle strong {
      font-weight: 600;
    }

    /* Intro-Textkarte */
    .card {
      border-radius: var(--radius-xxl);
      background: #fffdfb;
      border: 1px solid var(--border-soft);
      box-shadow: var(--shadow-soft);
      padding: 22px 26px 20px;
      margin-bottom: 22px;
    }

    @media (max-width: 720px) {
      .card {
        padding: 18px 16px 18px;
      }
    }

    .card h2 {
      font-family: "Playfair Display", "Georgia", serif;
      font-size: 1.45rem;
      color: var(--accent);
      margin-bottom: 6px;
    }

    .card p {
      font-size: 0.94rem;
      line-height: 1.7;
      color: var(--text-muted);
      margin-bottom: 10px;
    }

    .card p strong {
      color: var(--text-main);
      font-weight: 600;
    }

    .highlight-box {
      margin-top: 8px;
      border-radius: 16px;
      border: 1px solid #f0d2c8;
      background: #fff6f1;
      padding: 14px 16px;
      font-size: 0.9rem;
    }

    .highlight-title {
      font-weight: 600;
      color: var(--accent);
      margin-bottom: 6px;
    }

    .highlight-list {
      list-style: none;
      padding-left: 0;
    }

    .highlight-list li {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 4px;
      color: var(--text-muted);
    }

    .highlight-list li span.icon {
      font-size: 1rem;
    }

    .hero-cta-row {
      margin-top: 18px;
      display: flex;
      justify-content: center;
    }

    .btn-main {
      border: none;
      border-radius: 999px;
      padding: 11px 26px;
      font-size: 0.95rem;
      font-weight: 500;
      background: linear-gradient(135deg, var(--accent), var(--accent-soft));
      color: #fff;
      display: inline-flex;
      align-items: center;
      gap: 10px;
      cursor: pointer;
      box-shadow:
        0 15px 35px rgba(0,0,0,0.25),
        0 0 0 1px rgba(0,0,0,0.08);
      transition: transform var(--transition-fast), box-shadow var(--transition-fast), filter var(--transition-fast);
    }

    .btn-main span.icon {
      font-size: 1.1rem;
    }

    .btn-main:hover {
      transform: translateY(-1px);
      filter: brightness(1.04);
      box-shadow:
        0 18px 42px rgba(0,0,0,0.3),
        0 0 0 1px rgba(0,0,0,0.08);
    }

    /* Multi-Step Karten */
    .step-card {
      border-radius: var(--radius-xxl);
      background: #fffdfb;
      border: 1px solid var(--border-soft);
      box-shadow: var(--shadow-soft);
      padding: 22px 26px 22px;
      margin-bottom: 22px;
    }

    .step-header-title {
      font-family: "Playfair Display", "Georgia", serif;
      font-size: 1.4rem;
      color: var(--accent);
      margin-bottom: 4px;
    }

    .step-header-sub {
      font-size: 0.9rem;
      color: var(--text-muted);
      margin-bottom: 14px;
    }

    .section-label {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 0.88rem;
      font-weight: 600;
      color: var(--accent);
      margin-bottom: 10px;
    }

    .section-label span.icon {
      font-size: 1rem;
    }

    /* Grid f√ºr Datum/Uhrzeit */
    .grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 10px 14px;
      margin-bottom: 18px;
    }

    @media (max-width: 640px) {
      .grid {
        grid-template-columns: 1fr;
      }
    }

    .choice-btn {
      border-radius: 999px;
      border: 1px solid #ebd1c7;
      background: #fffaf7;
      padding: 9px 14px;
      font-size: 0.9rem;
      color: var(--text-main);
      text-align: center;
      cursor: pointer;
      transition: background var(--transition-fast), border-color var(--transition-fast), box-shadow var(--transition-fast), transform var(--transition-fast), color var(--transition-fast);
    }

    .choice-btn:hover {
      background: #fff3ee;
      transform: translateY(-1px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.06);
    }

    .choice-btn.selected {
      background: linear-gradient(135deg, #f6d4d2, #f7c2c5);
      border-color: #e49aa2;
      color: #4a2424;
      box-shadow: 0 10px 24px rgba(0,0,0,0.12);
    }

    /* Buttons unten */
    .step-actions {
      display: flex;
      justify-content: space-between;
      gap: 10px;
      margin-top: 6px;
    }

    @media (max-width: 520px) {
      .step-actions {
        flex-direction: column-reverse;
      }
    }

    .btn-secondary,
    .btn-primary-next,
    .btn-confirm {
      border-radius: 999px;
      padding: 10px 18px;
      font-size: 0.9rem;
      font-weight: 500;
      border: none;
      cursor: pointer;
      transition: background var(--transition-fast), box-shadow var(--transition-fast), transform var(--transition-fast), filter var(--transition-fast);
    }

    .btn-secondary {
      background: #f5ebdf;
      color: #6b5548;
    }

    .btn-secondary:hover {
      background: #efe2d4;
      transform: translateY(-1px);
    }

    .btn-primary-next,
    .btn-confirm {
      background: linear-gradient(135deg, var(--accent), var(--accent-soft));
      color: #fff;
      box-shadow:
        0 10px 26px rgba(0,0,0,0.16),
        0 0 0 1px rgba(0,0,0,0.06);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .btn-primary-next span.icon,
    .btn-confirm span.icon {
      font-size: 1rem;
    }

    .btn-primary-next:hover,
    .btn-confirm:hover:not(:disabled) {
      transform: translateY(-1px);
      filter: brightness(1.04);
      box-shadow:
        0 14px 32px rgba(0,0,0,0.2),
        0 0 0 1px rgba(0,0,0,0.06);
    }

    .btn-primary-next:disabled,
    .btn-confirm:disabled {
      opacity: 0.55;
      cursor: not-allowed;
      box-shadow: none;
    }

    /* Best√§tigungs-Box */
    .summary-box {
      margin: 10px 0 18px;
      border-radius: 16px;
      border: 1px solid #edc8c3;
      background: #fff5f4;
      padding: 12px 14px;
      font-size: 0.9rem;
      color: var(--text-muted);
    }

    .summary-title {
      font-weight: 600;
      color: var(--accent);
      margin-bottom: 6px;
    }

    .summary-item {
      display: flex;
      align-items: baseline;
      gap: 8px;
      margin-bottom: 3px;
    }

    .summary-item span.icon {
      font-size: 0.9rem;
      margin-top: 1px;
    }

    .summary-item strong {
      font-weight: 600;
      color: var(--text-main);
    }

    .hint {
      font-size: 0.8rem;
      color: var(--text-muted);
      margin-top: 8px;
    }

    .status-message {
      font-size: 0.82rem;
      margin-top: 8px;
      min-height: 1.1em;
    }

    .status-message.error {
      color: #b53940;
    }

    .status-message.success {
      color: #2f7e57;
    }

    /* Sichtbarkeit der Steps */
    .step {
      display: none;
    }

    .step.active {
      display: block;
    }

    footer {
      margin-top: 8px;
      font-size: 0.75rem;
      color: #a18378;
      text-align: center;
    }
  </style>
</head>
<body>
  <main class="page">
    <!-- STEP 1: Intro -->
    <section class="step active" id="step-intro">
      <div class="hero-card">
        <div class="hero-image">
          <div class="hero-overlay">
            <div class="hero-content">
              <div class="hero-pill">
                <span class="icon">üé°</span>
                <span>N√ºrnberger Christkindlesmarkt</span>
              </div>
              <h1 class="hero-title">
                Liebe <span>Lena</span>,
              </h1>
              <p class="hero-subtitle">
                ich m√∂chte dich gerne zu einem magischen Abend auf dem
                <strong>N√ºrnberger Christkindlesmarkt</strong> einladen ‚Äì zwischen Lichtern, Gl√ºhwein
                und ganz viel Weihnachtszauber.
              </p>
            </div>
          </div>
        </div>
      </div>

      <article class="card">
        <h2>Ein kleiner Vorgeschmack ‚ú®</h2>
        <p>
          Der <strong>N√ºrnberger Christkindlesmarkt</strong> geh√∂rt zu den √§ltesten und ber√ºhmtesten
          Weihnachtsm√§rkten der Welt. Seit 1628 verwandelt sich der Hauptmarkt rund um die Frauenkirche
          in das legend√§re <strong>‚ÄûSt√§dtlein aus Holz und Tuch‚Äú</strong>.
        </p>
        <p>
          Zwischen den rot-wei√üen Buden, dem Duft von Gl√ºhwein, gebrannten Mandeln und Lebkuchen
          m√∂chte ich mit dir einen Abend verbringen, der sich nach
          <strong>Weihnachten, W√§rme und Zeit zu zweit</strong> anf√ºhlt.
        </p>

        <div class="highlight-box">
          <div class="highlight-title">Was uns erwartet:</div>
          <ul class="highlight-list">
            <li><span class="icon">üéÑ</span>√úber 180 festlich geschm√ºckte Holzbuden rund um die Frauenkirche</li>
            <li><span class="icon">üç∑</span>Gl√ºhwein, Punsch &amp; traditionelle N√ºrnberger Spezialit√§ten</li>
            <li><span class="icon">üé∂</span>Weihnachtliche Musik, Lichtermeer &amp; richtig viel Stimmung</li>
            <li><span class="icon">üíõ</span>Ein Abend, der hoffentlich lange in Erinnerung bleibt</li>
          </ul>
        </div>

        <div class="hero-cta-row">
          <button class="btn-main" type="button" id="btn-start">
            <span>Ja, ich w√ºrde gerne kommen!</span>
            <span class="icon">ü§ç</span>
          </button>
        </div>
      </article>
    </section>

    <!-- STEP 2: Datum w√§hlen -->
    <section class="step" id="step-date">
      <article class="step-card">
        <div class="step-header">
          <h2 class="step-header-title">Wunderbar! <span>‚≠ê</span></h2>
          <p class="step-header-sub">
            W√§hle einen Tag aus, an dem du Zeit hast. Ich freue mich schon sehr!
          </p>
        </div>

        <div class="section-label">
          <span class="icon">üìÖ</span>
          <span>W√§hle einen Tag</span>
        </div>

        <div class="grid" id="date-grid">
          <!-- Buttons werden per JS eingef√ºgt -->
        </div>

        <div class="step-actions">
          <button class="btn-secondary" type="button" id="btn-date-back">
            Zur√ºck
          </button>
          <button class="btn-primary-next" type="button" id="btn-date-next" disabled>
            <span>Weiter zur Uhrzeitauswahl</span>
            <span class="icon">‚è±Ô∏è</span>
          </button>
        </div>
      </article>
    </section>

    <!-- STEP 3: Uhrzeit w√§hlen -->
    <section class="step" id="step-time">
      <article class="step-card">
        <div class="step-header">
          <h2 class="step-header-title">Perfekt! <span>üéÑ</span></h2>
          <p class="step-header-sub" id="time-step-text">
            Du hast einen Tag gew√§hlt. Wann m√∂chtest du dich treffen?
          </p>
        </div>

        <div class="section-label">
          <span class="icon">‚è∞</span>
          <span>W√§hle eine Uhrzeit</span>
        </div>

        <div class="grid" id="time-grid">
          <!-- Uhrzeit-Buttons per JS -->
        </div>

        <div class="step-actions">
          <button class="btn-secondary" type="button" id="btn-time-back">
            Zur√ºck
          </button>
          <button class="btn-primary-next" type="button" id="btn-time-next" disabled>
            <span>Weiter</span>
            <span class="icon">‚û°Ô∏è</span>
          </button>
        </div>
      </article>
    </section>

    <!-- STEP 4: Best√§tigung -->
    <section class="step" id="step-confirm">
      <article class="step-card">
        <div class="step-header">
          <h2 class="step-header-title">Fast geschafft! <span>‚ú®</span></h2>
          <p class="step-header-sub">
            Bitte best√§tige noch einmal dein Date. Danach k√ºmmere ich mich um den Rest. üíå
          </p>
        </div>

        <div class="summary-box">
          <div class="summary-title">Deine Auswahl:</div>
          <div class="summary-item">
            <span class="icon">üìÖ</span>
            <div><strong>Datum:</strong> <span id="summary-date"></span></div>
          </div>
          <div class="summary-item">
            <span class="icon">‚è∞</span>
            <div><strong>Uhrzeit:</strong> <span id="summary-time"></span></div>
          </div>
          <div class="summary-item">
            <span class="icon">üìç</span>
            <div><strong>Ort:</strong> N√ºrnberger Christkindlesmarkt</div>
          </div>
        </div>

        <p class="hint">
          Deine Auswahl wird nur verwendet, um mir eine E-Mail mit unserem Date zu schicken.
        </p>

        <div class="step-actions">
          <button class="btn-secondary" type="button" id="btn-confirm-back">
            Zur√ºck
          </button>
          <button class="btn-confirm" type="button" id="btn-confirm">
            <span>Date best√§tigen</span>
            <span class="icon">üì®</span>
          </button>
        </div>

        <div class="status-message error" id="status-error"></div>
        <div class="status-message success" id="status-success"></div>
      </article>
    </section>

    <footer>
      N√ºrnberger Christkindlesmarkt ¬∑ Hauptmarkt ¬∑ Gl√ºhwein, Lichter &amp; Zeit zu zweit
    </footer>
  </main>

  <script>
    // -------- Datenkonfiguration --------
    // Deine freien Tage (Datum + Anzeige-Text)
    const dateOptions = [
      { id: "2025-11-28", label: "Do, 28. November" },
      { id: "2025-11-29", label: "Fr, 29. November" },
      { id: "2025-11-30", label: "Sa, 30. November" },
      { id: "2025-12-01", label: "Mo, 1. Dezember" },
      { id: "2025-12-02", label: "Di, 2. Dezember" },
      { id: "2025-12-05", label: "Fr, 5. Dezember" },
      { id: "2025-12-06", label: "Sa, 6. Dezember (ab 16 Uhr)" },
      { id: "2025-12-08", label: "Mo, 8. Dezember" },
      { id: "2025-12-09", label: "Di, 9. Dezember" },
      { id: "2025-12-10", label: "Mi, 10. Dezember" },
      { id: "2025-12-11", label: "Do, 11. Dezember" },
      { id: "2025-12-12", label: "Fr, 12. Dezember" },
      { id: "2025-12-15", label: "Mo, 15. Dezember" },
      { id: "2025-12-16", label: "Di, 16. Dezember" },
      { id: "2025-12-17", label: "Mi, 17. Dezember" },
      { id: "2025-12-18", label: "Do, 18. Dezember" },
      { id: "2025-12-21", label: "So, 21. Dezember" },
      { id: "2025-12-22", label: "Mo, 22. Dezember" },
      { id: "2025-12-23", label: "Di, 23. Dezember" }
    ];

    // generelle Zeit-Slots (30-Minuten)
    const baseTimes = [
      "14:00","14:30","15:00","15:30",
      "16:00","16:30","17:00","17:30",
      "18:00","18:30","19:00","19:30",
      "20:00"
    ];

    // -------- State --------
    let selectedDateId = null;
    let selectedDateLabel = "";
    let selectedTime = null;

    // -------- Hilfsfunktionen --------
    function showStep(id) {
      document.querySelectorAll(".step").forEach(step => {
        step.classList.toggle("active", step.id === id);
      });
      window.scrollTo({ top: 0, behavior: "smooth" });
    }

    function clearStatus() {
      document.getElementById("status-error").textContent = "";
      document.getElementById("status-success").textContent = "";
    }

    function timeToMinutes(t) {
      const [h, m] = t.split(":").map(Number);
      return h * 60 + m;
    }

    function getTimesForDate(dateId) {
      // 06.12. erst ab 16 Uhr
      if (dateId === "2025-12-06") {
        return baseTimes.filter(t => timeToMinutes(t) >= timeToMinutes("16:00"));
      }
      return baseTimes;
    }

    // -------- DOM-Setup --------
    document.addEventListener("DOMContentLoaded", () => {
      const stepIntro = document.getElementById("step-intro");
      const stepDate = document.getElementById("step-date");
      const stepTime = document.getElementById("step-time");
      const stepConfirm = document.getElementById("step-confirm");

      const dateGrid = document.getElementById("date-grid");
      const timeGrid = document.getElementById("time-grid");

      const btnStart = document.getElementById("btn-start");
      const btnDateBack = document.getElementById("btn-date-back");
      const btnDateNext = document.getElementById("btn-date-next");
      const btnTimeBack = document.getElementById("btn-time-back");
      const btnTimeNext = document.getElementById("btn-time-next");
      const btnConfirmBack = document.getElementById("btn-confirm-back");
      const btnConfirm = document.getElementById("btn-confirm");

      const timeStepText = document.getElementById("time-step-text");
      const summaryDate = document.getElementById("summary-date");
      const summaryTime = document.getElementById("summary-time");
      const statusError = document.getElementById("status-error");
      const statusSuccess = document.getElementById("status-success");

      // Intro -> Datum
      btnStart.addEventListener("click", () => {
        showStep("step-date");
      });

      // Datum Buttons erzeugen
      dateOptions.forEach(opt => {
        const btn = document.createElement("button");
        btn.type = "button";
        btn.className = "choice-btn";
        btn.textContent = opt.label;
        btn.dataset.dateId = opt.id;
        btn.dataset.label = opt.label;

        btn.addEventListener("click", () => {
          selectedDateId = opt.id;
          selectedDateLabel = opt.label;
          selectedTime = null; // Reset Zeit bei neuem Datum

          document.querySelectorAll("#date-grid .choice-btn").forEach(b => {
            b.classList.toggle("selected", b === btn);
          });

          btnDateNext.disabled = false;
        });

        dateGrid.appendChild(btn);
      });

      // Zur√ºck von Datum -> Intro
      btnDateBack.addEventListener("click", () => {
        showStep("step-intro");
      });

      // Weiter von Datum -> Uhrzeit
      btnDateNext.addEventListener("click", () => {
        if (!selectedDateId) return;
        // Uhrzeiten auf Basis des Datums neu rendern
        timeGrid.innerHTML = "";
        const times = getTimesForDate(selectedDateId);
        times.forEach(t => {
          const b = document.createElement("button");
          b.type = "button";
          b.className = "choice-btn";
          b.textContent = t;
          b.dataset.time = t;

          b.addEventListener("click", () => {
            selectedTime = t;
            document.querySelectorAll("#time-grid .choice-btn").forEach(bb => {
              bb.classList.toggle("selected", bb === b);
            });
            btnTimeNext.disabled = false;
          });

          timeGrid.appendChild(b);
        });

        timeStepText.textContent = `Du hast den ${selectedDateLabel} gew√§hlt. Wann m√∂chtest du dich treffen?`;
        btnTimeNext.disabled = !selectedTime;
        showStep("step-time");
      });

      // Zur√ºck von Uhrzeit -> Datum
      btnTimeBack.addEventListener("click", () => {
        showStep("step-date");
      });

      // Weiter von Uhrzeit -> Best√§tigung
      btnTimeNext.addEventListener("click", () => {
        if (!selectedTime || !selectedDateLabel) return;
        summaryDate.textContent = selectedDateLabel;
        summaryTime.textContent = selectedTime + " Uhr";
        clearStatus();
        btnConfirm.disabled = false;
        btnConfirm.textContent = "Date best√§tigen";
        showStep("step-confirm");
      });

      // Zur√ºck von Best√§tigung -> Uhrzeit
      btnConfirmBack.addEventListener("click", () => {
        showStep("step-time");
      });

      // Date best√§tigen -> API Call
      btnConfirm.addEventListener("click", async () => {
        clearStatus();

        if (!selectedDateLabel || !selectedTime) {
          statusError.textContent = "Bitte w√§hle zuerst ein Datum und eine Uhrzeit aus.";
          return;
        }

        btnConfirm.disabled = true;
        btnConfirm.innerHTML = "<span>Wird gesendet‚Ä¶</span>";

        try {
          const response = await fetch("/api/send-date", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
              name: "Lena",
              date: selectedDateLabel,
              time: selectedTime,
              context: "N√ºrnberger Christkindlesmarkt Date"
            })
          });

          if (!response.ok) {
            throw new Error("Server error");
          }

          statusSuccess.textContent = "Danke! Dein Date ist bei mir angekommen. Ich melde mich mit den letzten Details. üíå";
        } catch (err) {
          console.error(err);
          statusError.textContent = "Ups, da ist technisch etwas schiefgelaufen. Versuch es bitte sp√§ter noch einmal.";
          btnConfirm.disabled = false;
          btnConfirm.innerHTML = '<span>Date best√§tigen</span><span class="icon">üì®</span>';
          return;
        }
      });
    });
  </script>
</body>
</html>






